(()=>{var e={};e.id=815,e.ids=[815],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},49760:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>n.a,__next_app__:()=>l,originalPathname:()=>f,pages:()=>o,routeModule:()=>u,tree:()=>b}),r(72904),r(67156),r(35866),r(68295);var s=r(23191),t=r(88716),d=r(37922),n=r.n(d),c=r(95231),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);r.d(a,i);let b=["",{children:["(withLayout)",{children:["users",{children:["edit",{children:["[userId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,72904)),"/Users/test/Downloads/ThriftMax/src/app/(withLayout)/users/edit/[userId]/page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,67156)),"/Users/test/Downloads/ThriftMax/src/app/(withLayout)/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,68295)),"/Users/test/Downloads/ThriftMax/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/test/Downloads/ThriftMax/src/app/(withLayout)/users/edit/[userId]/page.jsx"],f="/(withLayout)/users/edit/[userId]/page",l={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(withLayout)/users/edit/[userId]/page",pathname:"/users/edit/[userId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:b}})},22610:(e,a,r)=>{let s={"4b8a8793f6cac0a684ebfbdb87642c6103bcb493":()=>Promise.resolve().then(r.bind(r,45907)).then(e=>e.deleteCookie),"50945b97a8168d74b4af0a7dca5d20277190247c":()=>Promise.resolve().then(r.bind(r,45907)).then(e=>e.logoutUser),a3af60c0481ba134354d340725ac936e2df2d176:()=>Promise.resolve().then(r.bind(r,45907)).then(e=>e.loginUser),b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af:()=>Promise.resolve().then(r.bind(r,45907)).then(e=>e.jwtTokenVerification),c741e8319e6ee182d899d82bd0eff88c7c3aa98f:()=>Promise.resolve().then(r.bind(r,45907)).then(e=>e.getUserData)};async function t(e,...a){return(await s[e]()).apply(null,a)}e.exports={"4b8a8793f6cac0a684ebfbdb87642c6103bcb493":t.bind(null,"4b8a8793f6cac0a684ebfbdb87642c6103bcb493"),"50945b97a8168d74b4af0a7dca5d20277190247c":t.bind(null,"50945b97a8168d74b4af0a7dca5d20277190247c"),a3af60c0481ba134354d340725ac936e2df2d176:t.bind(null,"a3af60c0481ba134354d340725ac936e2df2d176"),b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af:t.bind(null,"b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af"),c741e8319e6ee182d899d82bd0eff88c7c3aa98f:t.bind(null,"c741e8319e6ee182d899d82bd0eff88c7c3aa98f")}},74294:(e,a,r)=>{let s={"48740c68c523baa02d8c3745e63fefc590d50d2f":()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.$$ACTION_2),"4ebf07a5b74a9d5b0a4fdeb2d0cd453557d38fb9":()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.$$ACTION_0),"70c230b40fa3c80f42cf01e39db71811f566dbd9":()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.$$ACTION_1),"7798a19ee65b8f55d0ff464387ea373e03e6f2e8":()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.createUser),"924ec62a76b7b8f8acb54fc157a2251e2a3f0226":()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.getUsers),a7e2c81b43f9732bc708bc3e2f53c4bc3463c4b8:()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.updateUser),daf420bf1001b4e1aa398a0459cfd9284a27e381:()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.deleteUser),e78936e0e5abf8cb4b78a11bb5c3d1bab38172c5:()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.getUniqueUser),ff3d2c9fa9d2cf556ce1f1f2a4a89bb6205d6ac4:()=>Promise.resolve().then(r.bind(r,7363)).then(e=>e.$$ACTION_3)};async function t(e,...a){return(await s[e]()).apply(null,a)}e.exports={"48740c68c523baa02d8c3745e63fefc590d50d2f":t.bind(null,"48740c68c523baa02d8c3745e63fefc590d50d2f"),"4ebf07a5b74a9d5b0a4fdeb2d0cd453557d38fb9":t.bind(null,"4ebf07a5b74a9d5b0a4fdeb2d0cd453557d38fb9"),"70c230b40fa3c80f42cf01e39db71811f566dbd9":t.bind(null,"70c230b40fa3c80f42cf01e39db71811f566dbd9"),"7798a19ee65b8f55d0ff464387ea373e03e6f2e8":t.bind(null,"7798a19ee65b8f55d0ff464387ea373e03e6f2e8"),"924ec62a76b7b8f8acb54fc157a2251e2a3f0226":t.bind(null,"924ec62a76b7b8f8acb54fc157a2251e2a3f0226"),a7e2c81b43f9732bc708bc3e2f53c4bc3463c4b8:t.bind(null,"a7e2c81b43f9732bc708bc3e2f53c4bc3463c4b8"),daf420bf1001b4e1aa398a0459cfd9284a27e381:t.bind(null,"daf420bf1001b4e1aa398a0459cfd9284a27e381"),e78936e0e5abf8cb4b78a11bb5c3d1bab38172c5:t.bind(null,"e78936e0e5abf8cb4b78a11bb5c3d1bab38172c5"),ff3d2c9fa9d2cf556ce1f1f2a4a89bb6205d6ac4:t.bind(null,"ff3d2c9fa9d2cf556ce1f1f2a4a89bb6205d6ac4")}},65603:(e,a,r)=>{Promise.resolve().then(r.bind(r,54582))},43900:(e,a,r)=>{"use strict";r.d(a,{Nq:()=>n,Nx:()=>d,h8:()=>t}),r(15424);var s=r(46242),t=(0,s.$)("daf420bf1001b4e1aa398a0459cfd9284a27e381");(0,s.$)("7798a19ee65b8f55d0ff464387ea373e03e6f2e8"),(0,s.$)("924ec62a76b7b8f8acb54fc157a2251e2a3f0226");var d=(0,s.$)("e78936e0e5abf8cb4b78a11bb5c3d1bab38172c5"),n=(0,s.$)("a7e2c81b43f9732bc708bc3e2f53c4bc3463c4b8")},75092:(e,a,r)=>{"use strict";r.d(a,{I:()=>d});var s=r(10326),t=r(91175);function d({type:e,className:a,...r}){return s.jsx("input",{type:e,className:(0,t.cn)("custom-input",a),...r})}},35548:(e,a,r)=>{"use strict";r.d(a,{Z:()=>d});var s=r(10326),t=r(91175);function d({className:e,required:a,children:r}){return(0,s.jsxs)("div",{className:(0,t.cn)("text-sm lg:text-base h-fit",e),children:[s.jsx("label",{children:r}),a&&s.jsx("span",{className:"text-red-500",children:"*"})]})}},54582:(e,a,r)=>{"use strict";r.d(a,{default:()=>i});var s=r(10326),t=r(43900),d=r(4344),n=r(75092),c=r(35548);let i=async({params:e})=>{let a=parseInt(e.userId),r=await (0,t.Nx)(a);return(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold p-2",children:" Edit User "}),(0,s.jsxs)("form",{className:"grid gap-x-6 gap-y-10 mt-10 grid-cols-2 px-2",action:a=>(0,t.Nq)(a,e.userId),children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(c.Z,{required:!0,children:"Username"}),s.jsx(n.I,{placeholder:"Enter Username",name:"userName",defaultValue:r.userName})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(c.Z,{required:!0,children:"User Type"}),(0,s.jsxs)("select",{className:"custom-input appearance-none cursor-pointer",name:"userType",defaultValue:r.userType,children:[s.jsx("option",{value:"",children:"Select User Type"}),s.jsx("option",{value:"Super Admin",children:"Super Admin"}),s.jsx("option",{value:"Admin",children:"Admin"}),s.jsx("option",{value:"Manager",children:"Manager"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(c.Z,{children:"Reset Password"}),s.jsx(n.I,{placeholder:"Example@123",name:"password"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(c.Z,{children:"Confirm Password"}),s.jsx(n.I,{placeholder:"Re-enter the Password",name:"confirmPassword"})]}),s.jsx(d.z,{className:"w-52 col-span-2 mt-2",children:"Submit"})]})]})}},53030:(e,a,r)=>{"use strict";r.d(a,{VC:()=>p});var s=r(27745);r(26461);var t=r(53973),d=r(23511),n=r(21560),c=r(14268);async function i(e){return await new n.N({...e}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("2h").sign(new TextEncoder().encode(process.env.JWT_SECRET))}async function b(e){try{let{payload:a}=await (0,c._)(e,new TextEncoder().encode(process.env.JWT_SECRET));return a}catch(e){return!1}}var o=r(74987),f=r.n(o),l=r(74739);async function u(e){let a={userName:e.get("userName"),password:e.get("password")},r=await d.db.adminUser.findUnique({where:{userName:a.userName}});console.log(r);let s=await f().compare(a.password,r?.password);if(!r||!s)return(0,l.redirect)("/login?errorMessage=Invalid credentials. Please try again.");(function(e,a,r={}){let s={httpOnly:!0,secure:!0,sameSite:"strict",path:"/",...r};(0,t.cookies)().set(e,a,s)})("jwt_token",await i(r),{maxAge:7200}),(0,l.redirect)("/")}async function p(){let e=function(e){let a=(0,t.cookies)().get(e);return a?.value||null}("jwt_token");return await b(e)||(h("jwt_token"),(0,l.redirect)("/login"))}async function m(){let e=await p();return await d.db.adminUser.findUnique({where:{id:e.id}})}async function h(e){(0,t.cookies)().delete(e)}async function w(){h("jwt_token"),(0,l.redirect)("/login")}(0,r(85723).h)([u,p,m,h,w]),(0,s.j)("a3af60c0481ba134354d340725ac936e2df2d176",u),(0,s.j)("b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af",p),(0,s.j)("c741e8319e6ee182d899d82bd0eff88c7c3aa98f",m),(0,s.j)("4b8a8793f6cac0a684ebfbdb87642c6103bcb493",h),(0,s.j)("50945b97a8168d74b4af0a7dca5d20277190247c",w)},7363:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$ACTION_0:()=>l,$$ACTION_1:()=>p,$$ACTION_2:()=>h,$$ACTION_3:()=>x,createUser:()=>f,deleteUser:()=>g,getUniqueUser:()=>m,getUsers:()=>u,updateUser:()=>w});var s=r(27745);r(26461);var t=r(23511),d=r(30207),n=r(74739),c=r(67096),i=r.n(c),b=r(53030),o=r(85723);let f=(0,s.j)("4ebf07a5b74a9d5b0a4fdeb2d0cd453557d38fb9",l);async function l(e){await (0,b.VC)();let a={userName:e.get("userName"),userType:e.get("userType"),password:e.get("password"),confirmPassword:e.get("confirmPassword")};if(await t.db.adminUser.findUnique({where:{userName:a.userName}}))return(0,n.redirect)("/users/add?errorMessage=Username already exists.");let r=i().genSaltSync(5),s=await i().hash(e.get("password"),r);await t.db.adminUser.create({data:{userName:a.userName,userType:a.userType,password:s}}),(0,d.revalidatePath)("/users","page"),(0,n.redirect)("/users")}let u=(0,s.j)("70c230b40fa3c80f42cf01e39db71811f566dbd9",p);async function p(){return await (0,b.VC)(),await t.db.adminUser.findMany()}let m=(0,s.j)("48740c68c523baa02d8c3745e63fefc590d50d2f",h);async function h(e){return await (0,b.VC)(),await t.db.adminUser.findUnique({where:{id:e}})}let w=(0,s.j)("ff3d2c9fa9d2cf556ce1f1f2a4a89bb6205d6ac4",x);async function x(e,a){let r;await (0,b.VC)();let s={userName:e.get("userName"),userType:e.get("userType"),password:e.get("password"),confirmPassword:e.get("confirmPassword")};if(s.password){let a=i().genSaltSync(5);r=await i().hash(e.get("password"),a)}await t.db.adminUser.update({where:{id:parseInt(a)},data:{userType:s.userType,userName:s.userName,...s.password&&{password:r}}}),(0,d.revalidatePath)("/users","page"),(0,n.redirect)("/users")}async function g(e){await (0,b.VC)(),await t.db.adminUser.delete({where:{id:e}}),(0,d.revalidatePath)("/users","page")}(0,o.h)([f,u,m,w,g]),(0,s.j)("7798a19ee65b8f55d0ff464387ea373e03e6f2e8",f),(0,s.j)("924ec62a76b7b8f8acb54fc157a2251e2a3f0226",u),(0,s.j)("e78936e0e5abf8cb4b78a11bb5c3d1bab38172c5",m),(0,s.j)("a7e2c81b43f9732bc708bc3e2f53c4bc3463c4b8",w),(0,s.j)("daf420bf1001b4e1aa398a0459cfd9284a27e381",g)},72904:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var s=r(19510);let t=(0,r(68570).createProxy)(String.raw`/Users/test/Downloads/ThriftMax/src/screens/users/edit/index.jsx#default`),d=async({params:e})=>s.jsx(s.Fragment,{children:s.jsx(t,{params:e})})},23511:(e,a,r)=>{"use strict";r.d(a,{db:()=>s});let s=new(r(53524)).PrismaClient}};var a=require("../../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[948,810,23,177,285,8,629,747],()=>r(49760));module.exports=s})();