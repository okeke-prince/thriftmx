(()=>{var e={};e.id=516,e.ids=[516],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},57601:(e,t,d)=>{"use strict";d.r(t),d.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>b,pages:()=>o,routeModule:()=>p,tree:()=>l}),d(74442),d(67156),d(35866),d(68295);var r=d(23191),a=d(88716),c=d(37922),i=d.n(c),s=d(95231),n={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>s[e]);d.d(t,n);let l=["",{children:["(withLayout)",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(d.bind(d,74442)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/products/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(d.bind(d,67156)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/layout.js"],"not-found":[()=>Promise.resolve().then(d.t.bind(d,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(d.bind(d,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(d.bind(d,68295)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(d.t.bind(d,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(d.bind(d,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/products/page.jsx"],b="/(withLayout)/products/page",u={require:d,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(withLayout)/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},68860:(e,t,d)=>{let r={"08bac90ba798c029913995b73a1774e0ed45bbdd":()=>Promise.resolve().then(d.bind(d,94598)).then(e=>e.handleDeleteImage),"51237199063d7dde7ecdcece5fed42c803171fac":()=>Promise.resolve().then(d.bind(d,94598)).then(e=>e.updateProduct),afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4:()=>Promise.resolve().then(d.bind(d,94598)).then(e=>e.getProducts),c06bc94d4c97743c4399be7ea567dba4a5c95ad4:()=>Promise.resolve().then(d.bind(d,94598)).then(e=>e.createProduct),f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7:()=>Promise.resolve().then(d.bind(d,94598)).then(e=>e.getUniqueProduct),fb595c665cbf7db187ab127ddb4ee71d6d727110:()=>Promise.resolve().then(d.bind(d,94598)).then(e=>e.deleteProduct),"4938cff2f84094ebf28b3110f00279e52ccc24c7":()=>Promise.resolve().then(d.bind(d,45907)).then(e=>e.getUserData),"49bdfda0b61e1d9e3dec73e3358d0109a525a197":()=>Promise.resolve().then(d.bind(d,45907)).then(e=>e.logoutUser),"6391ea613f5637ad589793c83dbae22bcc04f24a":()=>Promise.resolve().then(d.bind(d,45907)).then(e=>e.loginUser),"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9":()=>Promise.resolve().then(d.bind(d,45907)).then(e=>e.deleteCookie),b37804ffc12cc9454dc2ec3bd116c0d6f76c5599:()=>Promise.resolve().then(d.bind(d,45907)).then(e=>e.jwtTokenVerification)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"08bac90ba798c029913995b73a1774e0ed45bbdd":a.bind(null,"08bac90ba798c029913995b73a1774e0ed45bbdd"),"51237199063d7dde7ecdcece5fed42c803171fac":a.bind(null,"51237199063d7dde7ecdcece5fed42c803171fac"),afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4:a.bind(null,"afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4"),c06bc94d4c97743c4399be7ea567dba4a5c95ad4:a.bind(null,"c06bc94d4c97743c4399be7ea567dba4a5c95ad4"),f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7:a.bind(null,"f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7"),fb595c665cbf7db187ab127ddb4ee71d6d727110:a.bind(null,"fb595c665cbf7db187ab127ddb4ee71d6d727110"),"4938cff2f84094ebf28b3110f00279e52ccc24c7":a.bind(null,"4938cff2f84094ebf28b3110f00279e52ccc24c7"),"49bdfda0b61e1d9e3dec73e3358d0109a525a197":a.bind(null,"49bdfda0b61e1d9e3dec73e3358d0109a525a197"),"6391ea613f5637ad589793c83dbae22bcc04f24a":a.bind(null,"6391ea613f5637ad589793c83dbae22bcc04f24a"),"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9":a.bind(null,"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9"),b37804ffc12cc9454dc2ec3bd116c0d6f76c5599:a.bind(null,"b37804ffc12cc9454dc2ec3bd116c0d6f76c5599")}},31593:(e,t,d)=>{Promise.resolve().then(d.bind(d,36664))},25966:(e,t,d)=>{"use strict";d.d(t,{Ir:()=>a,nM:()=>c}),d(15424);var r=d(46242),a=(0,r.$)("fb595c665cbf7db187ab127ddb4ee71d6d727110");(0,r.$)("c06bc94d4c97743c4399be7ea567dba4a5c95ad4"),(0,r.$)("afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4"),(0,r.$)("f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7");var c=(0,r.$)("51237199063d7dde7ecdcece5fed42c803171fac");(0,r.$)("08bac90ba798c029913995b73a1774e0ed45bbdd")},41530:(e,t,d)=>{"use strict";d.d(t,{Z:()=>i});var r=d(10326),a=d(82065),c=d(4344);let i=({setIsOpen:e,onCancel:t,handleConfirm:d})=>{let i=()=>{e(!1)};return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto overflow-x-hidden flex items-center justify-center",children:[r.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:i}),r.jsx("div",{className:"relative p-4 w-full max-w-xl h-full md:h-auto",children:(0,r.jsxs)("div",{className:"relative text-center bg-white rounded-lg shadow-lg p-5",children:[r.jsx("button",{type:"button",className:"close-icon-button",onClick:i,children:r.jsx(a.Tw,{})}),r.jsx("div",{className:"flex items-center justify-center text-red-500",children:r.jsx(a.pJ,{className:"h-16 w-16"})}),r.jsx("p",{className:"my-6 font-semibold text-xl",children:"Are you sure you want to delete?"}),(0,r.jsxs)("div",{className:"flex justify-end items-center space-x-4",children:[r.jsx(c.z,{type:"button",className:"bg-transparent text-black borer border-gray-600",onClick:t,children:"Cancel"}),r.jsx(c.z,{type:"submit",onClick:d,children:"Confrim"})]})]})})]})}},36664:(e,t,d)=>{"use strict";d.d(t,{default:()=>u});var r=d(10326),a=d(17577),c=d(41530),i=d(90434),s=d(46226),n=d(82065),l=d(4344),o=d(91175),b=d(25966);let u=({products:e})=>{let[t,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(),f=async()=>{await (0,b.Ir)(u),d(!1),p(null)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("h1",{className:"font-semibold text-3xl p-2",children:" Products Management "}),r.jsx("button",{children:r.jsx(i.default,{href:"/products/add",className:"custom-primary-btn",children:"Add Product"})})]}),r.jsx("hr",{className:"my-5"}),(0,r.jsxs)("div",{className:"mt-20",children:[(0,r.jsxs)("table",{className:"custom-table",children:[r.jsx("thead",{className:"border-y-2 border-gray-400",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Product Type"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"Selling Price"}),r.jsx("th",{children:"Current Stock"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{className:"text-gray-700 font-medium text-lg text-center",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"grid grid-cols-[auto_1fr] gap-3",children:[r.jsx(s.default,{src:"/"+e.image,alt:e.name,width:0,height:0,sizes:"100vw",className:"w-20 h-20 object-cover"}),(0,r.jsxs)("div",{className:"flex flex-col self-center",children:[r.jsx("span",{children:e.name}),r.jsx("span",{className:"text-sm text-gray-500 truncate max-w-52",children:e.description})]})]}),r.jsx("td",{children:e.productType.name||"-"}),(0,r.jsxs)("td",{children:["$",e.mrp||"0"]}),(0,r.jsxs)("td",{children:["$",e.sellPrice||"0"]}),r.jsx("td",{children:e.currentStock||"0"}),r.jsx("td",{className:(0,o.cn)(e.isActive?"text-green-500":"text-red-500"),children:e.isActive?"Active":"Inactive"}),r.jsx("td",{children:(0,r.jsxs)("div",{className:"flex self-center gap-x-3",children:[r.jsx(i.default,{href:`/products/edit/${e.id}`,className:"w-fit",children:r.jsx(n.dY,{})}),r.jsx(l.z,{className:"bg-transparent p-0 px-2 border-none text-red-500",onClick:()=>{d(!0),p(e)},children:r.jsx(n.pJ,{})})]})})]},e.id))})]}),t&&r.jsx(c.Z,{setIsOpen:d,onCancel:()=>d(!1),handleConfirm:f})]})]})}},94598:(e,t,d)=>{"use strict";d.r(t),d.d(t,{createProduct:()=>m,deleteProduct:()=>y,getProducts:()=>h,getUniqueProduct:()=>x,handleDeleteImage:()=>j,updateProduct:()=>g});var r=d(24330);d(60166);var a=d(16385),c=d(58585),i=d(71017),s=d.n(i);let n=require("fs");var l=d.n(n);let o=require("fs/promises");var b=d(57708),u=d(45907),p=d(40618);let f=s().resolve("public/uploads");async function m(e){await (0,u.jwtTokenVerification)();let t={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await a.db.productType.findUnique({where:{id:parseInt(t.productTypeId)}}))return(0,c.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let d=e.get("image"),r="";if(d){let e=await d.arrayBuffer(),t=Buffer.from(e);l().existsSync(f)||l().mkdirSync(f);let a=Date.now()+s().extname(d.name);r=`uploads/${a}`;let c=s().join(process.cwd(),"public",r);await (0,o.writeFile)(c,t)}let i=parseInt(t.smallSize)+parseInt(t.mediumSize)+parseInt(t.largeSize);await a.db.product.create({data:{name:t.name,description:t.description,sellPrice:parseFloat(t.sellPrice),mrp:parseFloat(t.mrp),image:r,currentStock:i,productTypeId:parseInt(t.productTypeId),isActive:"on"===t.isActive,smallSize:parseInt(t.smallSize),mediumSize:parseInt(t.mediumSize),largeSize:parseInt(t.largeSize)}}),(0,b.revalidatePath)("/products","page"),(0,c.redirect)("/products")}async function h(){return await (0,u.jwtTokenVerification)(),await a.db.product.findMany({include:{productType:!0}})}async function x(e){return await (0,u.jwtTokenVerification)(),await a.db.product.findUnique({where:{id:parseInt(e)},include:{productType:!0}})}async function g(e,t,d){await (0,u.jwtTokenVerification)();let r={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await a.db.productType.findUnique({where:{id:parseInt(r.productTypeId)}}))return(0,c.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let i=e.get("image"),n=d;if(i&&i.size>0){await j(d);let e=await i.arrayBuffer(),t=Buffer.from(e);l().existsSync(f)||l().mkdirSync(f);let r=Date.now()+s().extname(i.name);n=`uploads/${r}`;let a=s().join(process.cwd(),"public",n);await (0,o.writeFile)(a,t)}let p=parseInt(r.smallSize)+parseInt(r.mediumSize)+parseInt(r.largeSize);await a.db.product.update({where:{id:parseInt(t)},data:{name:r.name,description:r.description,sellPrice:parseFloat(r.sellPrice),mrp:parseFloat(r.mrp),image:n,currentStock:p,productTypeId:parseInt(r.productTypeId),isActive:"on"===r.isActive,smallSize:parseInt(r.smallSize),mediumSize:parseInt(r.mediumSize),largeSize:parseInt(r.largeSize)}}),(0,b.revalidatePath)("/products","page"),(0,c.redirect)("/products")}async function j(e){if(await (0,u.jwtTokenVerification)(),e){let t=s().join(process.cwd(),"public",e);l().existsSync(t)&&l().unlinkSync(t)}}async function y(e){await (0,u.jwtTokenVerification)(),await a.db.product.delete({where:{id:parseInt(e.id)}}),await j(e.image),(0,b.revalidatePath)("/products","page")}(0,p.h)([m,h,x,g,j,y]),(0,r.j)("c06bc94d4c97743c4399be7ea567dba4a5c95ad4",m),(0,r.j)("afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4",h),(0,r.j)("f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7",x),(0,r.j)("51237199063d7dde7ecdcece5fed42c803171fac",g),(0,r.j)("08bac90ba798c029913995b73a1774e0ed45bbdd",j),(0,r.j)("fb595c665cbf7db187ab127ddb4ee71d6d727110",y)},74442:(e,t,d)=>{"use strict";d.r(t),d.d(t,{default:()=>i});var r=d(19510),a=d(94598);let c=(0,d(68570).createProxy)(String.raw`/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/screens/products/index.jsx#default`),i=async()=>{let e=await (0,a.getProducts)();return r.jsx(r.Fragment,{children:r.jsx(c,{products:e})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var d=e=>t(t.s=e),r=t.X(0,[948,810,23,177,285,8,708,976],()=>d(57601));module.exports=r})();