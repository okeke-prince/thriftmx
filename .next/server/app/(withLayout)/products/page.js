(()=>{var e={};e.id=516,e.ids=[516],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},57577:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>l}),a(74442),a(67156),a(35866),a(68295);var r=a(23191),d=a(88716),i=a(37922),s=a.n(i),c=a(95231),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);a.d(t,n);let l=["",{children:["(withLayout)",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,74442)),"/Users/test/Downloads/ThriftMax/src/app/(withLayout)/products/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,67156)),"/Users/test/Downloads/ThriftMax/src/app/(withLayout)/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,68295)),"/Users/test/Downloads/ThriftMax/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/test/Downloads/ThriftMax/src/app/(withLayout)/products/page.jsx"],u="/(withLayout)/products/page",f={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/(withLayout)/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},41188:(e,t,a)=>{let r={"07bcfee8f6b22c949bcdd0735f3f98717dad9843":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.deleteProduct),"2b4ee8cd97549b75b3c1062efb40e826b6f04772":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.handleDeleteImage),"7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.getProducts),"99ad7be6a2e4ccc80518dac1ffad49ea8ddced50":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.createProduct),a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.getUniqueProduct),f55a8fe18170919c294173ba15a0a28085d0622b:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.updateProduct),"4b8a8793f6cac0a684ebfbdb87642c6103bcb493":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.deleteCookie),"50945b97a8168d74b4af0a7dca5d20277190247c":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.logoutUser),a3af60c0481ba134354d340725ac936e2df2d176:()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.loginUser),b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af:()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.jwtTokenVerification),c741e8319e6ee182d899d82bd0eff88c7c3aa98f:()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.getUserData)};async function d(e,...t){return(await r[e]()).apply(null,t)}e.exports={"07bcfee8f6b22c949bcdd0735f3f98717dad9843":d.bind(null,"07bcfee8f6b22c949bcdd0735f3f98717dad9843"),"2b4ee8cd97549b75b3c1062efb40e826b6f04772":d.bind(null,"2b4ee8cd97549b75b3c1062efb40e826b6f04772"),"7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b":d.bind(null,"7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b"),"99ad7be6a2e4ccc80518dac1ffad49ea8ddced50":d.bind(null,"99ad7be6a2e4ccc80518dac1ffad49ea8ddced50"),a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4:d.bind(null,"a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4"),f55a8fe18170919c294173ba15a0a28085d0622b:d.bind(null,"f55a8fe18170919c294173ba15a0a28085d0622b"),"4b8a8793f6cac0a684ebfbdb87642c6103bcb493":d.bind(null,"4b8a8793f6cac0a684ebfbdb87642c6103bcb493"),"50945b97a8168d74b4af0a7dca5d20277190247c":d.bind(null,"50945b97a8168d74b4af0a7dca5d20277190247c"),a3af60c0481ba134354d340725ac936e2df2d176:d.bind(null,"a3af60c0481ba134354d340725ac936e2df2d176"),b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af:d.bind(null,"b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af"),c741e8319e6ee182d899d82bd0eff88c7c3aa98f:d.bind(null,"c741e8319e6ee182d899d82bd0eff88c7c3aa98f")}},65761:(e,t,a)=>{Promise.resolve().then(a.bind(a,36664))},25966:(e,t,a)=>{"use strict";a.d(t,{Ir:()=>d,nM:()=>i}),a(15424);var r=a(46242),d=(0,r.$)("07bcfee8f6b22c949bcdd0735f3f98717dad9843");(0,r.$)("99ad7be6a2e4ccc80518dac1ffad49ea8ddced50"),(0,r.$)("7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b"),(0,r.$)("a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4");var i=(0,r.$)("f55a8fe18170919c294173ba15a0a28085d0622b");(0,r.$)("2b4ee8cd97549b75b3c1062efb40e826b6f04772")},41530:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326),d=a(82065),i=a(4344);let s=({setIsOpen:e,onCancel:t,handleConfirm:a})=>{let s=()=>{e(!1)};return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto overflow-x-hidden flex items-center justify-center",children:[r.jsx("div",{className:"fixed inset-0 bg-black opacity-50",onClick:s}),r.jsx("div",{className:"relative p-4 w-full max-w-xl h-full md:h-auto",children:(0,r.jsxs)("div",{className:"relative text-center bg-white rounded-lg shadow-lg p-5",children:[r.jsx("button",{type:"button",className:"close-icon-button",onClick:s,children:r.jsx(d.Tw,{})}),r.jsx("div",{className:"flex items-center justify-center text-red-500",children:r.jsx(d.pJ,{className:"h-16 w-16"})}),r.jsx("p",{className:"my-6 font-semibold text-xl",children:"Are you sure you want to delete?"}),(0,r.jsxs)("div",{className:"flex justify-end items-center space-x-4",children:[r.jsx(i.z,{type:"button",className:"bg-transparent text-black borer border-gray-600",onClick:t,children:"Cancel"}),r.jsx(i.z,{type:"submit",onClick:a,children:"Confrim"})]})]})})]})}},36664:(e,t,a)=>{"use strict";a.d(t,{default:()=>f});var r=a(10326),d=a(17577),i=a(41530),s=a(90434),c=a(46226),n=a(82065),l=a(4344),o=a(91175),u=a(25966);let f=({products:e})=>{let[t,a]=(0,d.useState)(!1),[f,p]=(0,d.useState)(),b=async()=>{await (0,u.Ir)(f),a(!1),p(null)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("h1",{className:"font-semibold text-3xl p-2",children:" Products Management "}),r.jsx("button",{children:r.jsx(s.default,{href:"/products/add",className:"custom-primary-btn",children:"Add Product"})})]}),r.jsx("hr",{className:"my-5"}),(0,r.jsxs)("div",{className:"mt-20",children:[(0,r.jsxs)("table",{className:"custom-table",children:[r.jsx("thead",{className:"border-y-2 border-gray-400",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:"Product"}),r.jsx("th",{children:"Product Type"}),r.jsx("th",{children:"MRP"}),r.jsx("th",{children:"Selling Price"}),r.jsx("th",{children:"Current Stock"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Action"})]})}),r.jsx("tbody",{className:"text-gray-700 font-medium text-lg text-center",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"grid grid-cols-[auto_1fr] gap-3",children:[r.jsx(c.default,{src:"/"+e.image,alt:e.name,width:0,height:0,sizes:"100vw",className:"w-20 h-20 object-cover"}),(0,r.jsxs)("div",{className:"flex flex-col self-center",children:[r.jsx("span",{children:e.name}),r.jsx("span",{className:"text-sm text-gray-500 truncate max-w-52",children:e.description})]})]}),r.jsx("td",{children:e.productType.name||"-"}),(0,r.jsxs)("td",{children:["$",e.mrp||"0"]}),(0,r.jsxs)("td",{children:["$",e.sellPrice||"0"]}),r.jsx("td",{children:e.currentStock||"0"}),r.jsx("td",{className:(0,o.cn)(e.isActive?"text-green-500":"text-red-500"),children:e.isActive?"Active":"Inactive"}),r.jsx("td",{children:(0,r.jsxs)("div",{className:"flex self-center gap-x-3",children:[r.jsx(s.default,{href:`/products/edit/${e.id}`,className:"w-fit",children:r.jsx(n.dY,{})}),r.jsx(l.z,{className:"bg-transparent p-0 px-2 border-none text-red-500",onClick:()=>{a(!0),p(e)},children:r.jsx(n.pJ,{})})]})})]},e.id))})]}),t&&r.jsx(i.Z,{setIsOpen:a,onCancel:()=>a(!1),handleConfirm:b})]})]})}},94598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createProduct:()=>m,deleteProduct:()=>y,getProducts:()=>h,getUniqueProduct:()=>x,handleDeleteImage:()=>j,updateProduct:()=>g});var r=a(24330);a(60166);var d=a(16385),i=a(58585),s=a(71017),c=a.n(s);let n=require("fs");var l=a.n(n);let o=require("fs/promises");var u=a(57708),f=a(45907),p=a(40618);let b=c().resolve("public/uploads");async function m(e){await (0,f.jwtTokenVerification)();let t={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await d.db.productType.findUnique({where:{id:parseInt(t.productTypeId)}}))return(0,i.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let a=e.get("image"),r="";if(a){let e=await a.arrayBuffer(),t=Buffer.from(e);l().existsSync(b)||l().mkdirSync(b);let d=Date.now()+c().extname(a.name);r=`uploads/${d}`;let i=c().join(process.cwd(),"public",r);await (0,o.writeFile)(i,t)}let s=parseInt(t.smallSize)+parseInt(t.mediumSize)+parseInt(t.largeSize);await d.db.product.create({data:{name:t.name,description:t.description,sellPrice:parseFloat(t.sellPrice),mrp:parseFloat(t.mrp),image:r,currentStock:s,productTypeId:parseInt(t.productTypeId),isActive:"on"===t.isActive,smallSize:parseInt(t.smallSize),mediumSize:parseInt(t.mediumSize),largeSize:parseInt(t.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,i.redirect)("/products")}async function h(){return await (0,f.jwtTokenVerification)(),await d.db.product.findMany({include:{productType:!0}})}async function x(e){return await (0,f.jwtTokenVerification)(),await d.db.product.findUnique({where:{id:parseInt(e)},include:{productType:!0}})}async function g(e,t,a){await (0,f.jwtTokenVerification)();let r={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await d.db.productType.findUnique({where:{id:parseInt(r.productTypeId)}}))return(0,i.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let s=e.get("image"),n=a;if(s&&s.size>0){await j(a);let e=await s.arrayBuffer(),t=Buffer.from(e);l().existsSync(b)||l().mkdirSync(b);let r=Date.now()+c().extname(s.name);n=`uploads/${r}`;let d=c().join(process.cwd(),"public",n);await (0,o.writeFile)(d,t)}let p=parseInt(r.smallSize)+parseInt(r.mediumSize)+parseInt(r.largeSize);await d.db.product.update({where:{id:parseInt(t)},data:{name:r.name,description:r.description,sellPrice:parseFloat(r.sellPrice),mrp:parseFloat(r.mrp),image:n,currentStock:p,productTypeId:parseInt(r.productTypeId),isActive:"on"===r.isActive,smallSize:parseInt(r.smallSize),mediumSize:parseInt(r.mediumSize),largeSize:parseInt(r.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,i.redirect)("/products")}async function j(e){if(await (0,f.jwtTokenVerification)(),e){let t=c().join(process.cwd(),"public",e);l().existsSync(t)&&l().unlinkSync(t)}}async function y(e){await (0,f.jwtTokenVerification)(),await d.db.product.delete({where:{id:parseInt(e.id)}}),await j(e.image),(0,u.revalidatePath)("/products","page")}(0,p.h)([m,h,x,g,j,y]),(0,r.j)("99ad7be6a2e4ccc80518dac1ffad49ea8ddced50",m),(0,r.j)("7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b",h),(0,r.j)("a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4",x),(0,r.j)("f55a8fe18170919c294173ba15a0a28085d0622b",g),(0,r.j)("2b4ee8cd97549b75b3c1062efb40e826b6f04772",j),(0,r.j)("07bcfee8f6b22c949bcdd0735f3f98717dad9843",y)},74442:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(19510),d=a(94598);let i=(0,a(68570).createProxy)(String.raw`/Users/test/Downloads/ThriftMax/src/screens/products/index.jsx#default`),s=async()=>{let e=await (0,d.getProducts)();return r.jsx(r.Fragment,{children:r.jsx(i,{products:e})})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,810,23,177,285,8,708,747],()=>a(57577));module.exports=r})();