(()=>{var e={};e.id=431,e.ids=[431],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},58380:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>b,tree:()=>o}),a(72057),a(67156),a(35866),a(68295);var d=a(23191),r=a(88716),c=a(37922),i=a.n(c),n=a(95231),s={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>n[e]);a.d(t,s);let o=["",{children:["(withLayout)",{children:["products",{children:["edit",{children:["[productId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,72057)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/products/edit/[productId]/page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,67156)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,68295)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/products/edit/[productId]/page.jsx"],u="/(withLayout)/products/edit/[productId]/page",p={require:a,loadChunk:()=>Promise.resolve()},b=new d.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(withLayout)/products/edit/[productId]/page",pathname:"/products/edit/[productId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},85987:(e,t,a)=>{let d={"08bac90ba798c029913995b73a1774e0ed45bbdd":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.handleDeleteImage),"51237199063d7dde7ecdcece5fed42c803171fac":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.updateProduct),afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.getProducts),c06bc94d4c97743c4399be7ea567dba4a5c95ad4:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.createProduct),f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.getUniqueProduct),fb595c665cbf7db187ab127ddb4ee71d6d727110:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.deleteProduct),"4938cff2f84094ebf28b3110f00279e52ccc24c7":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.getUserData),"49bdfda0b61e1d9e3dec73e3358d0109a525a197":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.logoutUser),"6391ea613f5637ad589793c83dbae22bcc04f24a":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.loginUser),"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.deleteCookie),b37804ffc12cc9454dc2ec3bd116c0d6f76c5599:()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.jwtTokenVerification),"168e6317ac10e81b65634b43b3b63d2b787932f3":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.getProductTypes),"30fde77701062ab9858ba7a3094a98289ea1658a":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.createProductType),"9292c2ba51e9c42eece794e1d3cbda72604f9eee":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.updateProductType),"93113786f48ef592bf71c4a596b5659aa2fe123b":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.getUniqueProductType),a5c5a1ac997c4f42598f84e63fdaecb558bc452f:()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.deleteProductType)};async function r(e,...t){return(await d[e]()).apply(null,t)}e.exports={"08bac90ba798c029913995b73a1774e0ed45bbdd":r.bind(null,"08bac90ba798c029913995b73a1774e0ed45bbdd"),"51237199063d7dde7ecdcece5fed42c803171fac":r.bind(null,"51237199063d7dde7ecdcece5fed42c803171fac"),afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4:r.bind(null,"afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4"),c06bc94d4c97743c4399be7ea567dba4a5c95ad4:r.bind(null,"c06bc94d4c97743c4399be7ea567dba4a5c95ad4"),f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7:r.bind(null,"f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7"),fb595c665cbf7db187ab127ddb4ee71d6d727110:r.bind(null,"fb595c665cbf7db187ab127ddb4ee71d6d727110"),"4938cff2f84094ebf28b3110f00279e52ccc24c7":r.bind(null,"4938cff2f84094ebf28b3110f00279e52ccc24c7"),"49bdfda0b61e1d9e3dec73e3358d0109a525a197":r.bind(null,"49bdfda0b61e1d9e3dec73e3358d0109a525a197"),"6391ea613f5637ad589793c83dbae22bcc04f24a":r.bind(null,"6391ea613f5637ad589793c83dbae22bcc04f24a"),"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9":r.bind(null,"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9"),b37804ffc12cc9454dc2ec3bd116c0d6f76c5599:r.bind(null,"b37804ffc12cc9454dc2ec3bd116c0d6f76c5599"),"168e6317ac10e81b65634b43b3b63d2b787932f3":r.bind(null,"168e6317ac10e81b65634b43b3b63d2b787932f3"),"30fde77701062ab9858ba7a3094a98289ea1658a":r.bind(null,"30fde77701062ab9858ba7a3094a98289ea1658a"),"9292c2ba51e9c42eece794e1d3cbda72604f9eee":r.bind(null,"9292c2ba51e9c42eece794e1d3cbda72604f9eee"),"93113786f48ef592bf71c4a596b5659aa2fe123b":r.bind(null,"93113786f48ef592bf71c4a596b5659aa2fe123b"),a5c5a1ac997c4f42598f84e63fdaecb558bc452f:r.bind(null,"a5c5a1ac997c4f42598f84e63fdaecb558bc452f")}},20107:(e,t,a)=>{Promise.resolve().then(a.bind(a,93623))},25966:(e,t,a)=>{"use strict";a.d(t,{Ir:()=>r,nM:()=>c}),a(15424);var d=a(46242),r=(0,d.$)("fb595c665cbf7db187ab127ddb4ee71d6d727110");(0,d.$)("c06bc94d4c97743c4399be7ea567dba4a5c95ad4"),(0,d.$)("afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4"),(0,d.$)("f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7");var c=(0,d.$)("51237199063d7dde7ecdcece5fed42c803171fac");(0,d.$)("08bac90ba798c029913995b73a1774e0ed45bbdd")},3526:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var d=a(10326),r=a(17577),c=a(82065),i=a(75092);let n=({name:e,required:t,defaultValue:a})=>{let[n,s]=(0,r.useState)("No file chosen.");return(0,r.useEffect)(()=>{if(a){let e=a.split("/");s(e[e.length-1])}},[a]),(0,d.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-2 items-center",children:[d.jsx(i.I,{type:"file",name:e,required:t,className:"sr-only",id:"fileInput",onChange:e=>{s(e.target.files[0].name||"No file chosen.")}}),(0,d.jsxs)("label",{htmlFor:"fileInput",className:"custom-input px-4 py-2 bg-blue-500 text-white rounded-lg  cursor-pointer hover:bg-blue-600 w-fit flex items-center gap-x-2",children:[d.jsx(c.rG,{}),"Choose File"]}),d.jsx("span",{className:"ml-3 text-gray-600 truncate",children:n})]})}},75092:(e,t,a)=>{"use strict";a.d(t,{I:()=>c});var d=a(10326),r=a(91175);function c({type:e,className:t,...a}){return d.jsx("input",{type:e,className:(0,r.cn)("custom-input",t),...a})}},35548:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var d=a(10326),r=a(91175);function c({className:e,required:t,children:a}){return(0,d.jsxs)("div",{className:(0,r.cn)("text-sm lg:text-base h-fit",e),children:[d.jsx("label",{children:a}),t&&d.jsx("span",{className:"text-red-500",children:"*"})]})}},93623:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var d=a(10326),r=a(75092),c=a(4344),i=a(35548),n=a(91175);let s=({name:e,className:t,defaultValue:a})=>(0,d.jsxs)("label",{className:(0,n.cn)("inline-flex items-center cursor-pointer w-fit",t),children:[d.jsx(r.I,{type:"checkbox",name:e,className:"sr-only peer",defaultChecked:a}),d.jsx("div",{className:"relative w-16 h-8 bg-gray-200 rounded-full after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:rounded-full after:h-7 after:w-7 after:transition-all peer peer-checked:after:translate-x-full  rtl:peer-checked:after:-translate-x-full peer-checked:bg-blue-600"})]});var o=a(3526),l=a(25966);let u=({searchParams:e,productTypes:t,product:a})=>{let{errorMessage:n}=e;return(0,d.jsxs)("div",{children:[d.jsx("h1",{className:"text-3xl font-semibold p-2",children:" Edit Product "}),(0,d.jsxs)("form",{className:"grid gap-x-6 gap-y-10 mt-10 grid-cols-2 px-2",action:e=>(0,l.nM)(e,a.id,a.image),children:[n&&d.jsx("div",{className:"col-span-2 border border-red-500 rounded-xl px-5 py-3 bg-red-50 w-fit",children:d.jsx("span",{className:"text-red-500 col-span-2 text-mg my-0 font-500",children:n})}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Product Name"}),d.jsx(r.I,{placeholder:"Enter Product Name",name:"name",defaultValue:a.name})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Product Type"}),d.jsx("select",{className:"custom-input appearance-none cursor-pointer",name:"productType",defaultValue:a.productTypeId,children:t?.map(e=>d.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"MRP"}),d.jsx(r.I,{placeholder:"Enter MRP",name:"mrp",defaultValue:a.mrp})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Selling Price"}),d.jsx(r.I,{type:"number",placeholder:"Enter Selling Price",name:"sellPrice",defaultValue:a.sellPrice})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Image"}),d.jsx(o.default,{name:"image",required:!0,defaultValue:a.image})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Stock of Small Size"}),d.jsx(r.I,{type:"number",placeholder:"Enter Stock of Small Size",name:"smallSize",defaultValue:a.smallSize})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Stock of Medium Size"}),d.jsx(r.I,{type:"number",placeholder:"Enter Stock of Medium Size",name:"mediumSize",defaultValue:a.mediumSize})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Stock of Large Size"}),d.jsx(r.I,{type:"number",placeholder:"Enter Stock of Large Size",name:"largeSize",defaultValue:a.largeSize})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[d.jsx(i.Z,{required:!0,children:"Product Status"}),d.jsx(s,{name:"isActive",defaultValue:a.isActive?"on":null})]}),(0,d.jsxs)("div",{className:"grid col-span-2 gap-2",children:[d.jsx(i.Z,{required:!0,children:"Description"}),d.jsx("textarea",{className:"custom-input h-auto",name:"description",rows:5,placeholder:"Enter Product Description",defaultValue:a.description})]}),d.jsx(c.z,{className:"w-52 col-span-2 mt-2",children:"Submit"})]})]})}},94598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createProduct:()=>m,deleteProduct:()=>j,getProducts:()=>h,getUniqueProduct:()=>g,handleDeleteImage:()=>y,updateProduct:()=>x});var d=a(24330);a(60166);var r=a(16385),c=a(58585),i=a(71017),n=a.n(i);let s=require("fs");var o=a.n(s);let l=require("fs/promises");var u=a(57708),p=a(45907),b=a(40618);let f=n().resolve("public/uploads");async function m(e){await (0,p.jwtTokenVerification)();let t={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await r.db.productType.findUnique({where:{id:parseInt(t.productTypeId)}}))return(0,c.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let a=e.get("image"),d="";if(a){let e=await a.arrayBuffer(),t=Buffer.from(e);o().existsSync(f)||o().mkdirSync(f);let r=Date.now()+n().extname(a.name);d=`uploads/${r}`;let c=n().join(process.cwd(),"public",d);await (0,l.writeFile)(c,t)}let i=parseInt(t.smallSize)+parseInt(t.mediumSize)+parseInt(t.largeSize);await r.db.product.create({data:{name:t.name,description:t.description,sellPrice:parseFloat(t.sellPrice),mrp:parseFloat(t.mrp),image:d,currentStock:i,productTypeId:parseInt(t.productTypeId),isActive:"on"===t.isActive,smallSize:parseInt(t.smallSize),mediumSize:parseInt(t.mediumSize),largeSize:parseInt(t.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,c.redirect)("/products")}async function h(){return await (0,p.jwtTokenVerification)(),await r.db.product.findMany({include:{productType:!0}})}async function g(e){return await (0,p.jwtTokenVerification)(),await r.db.product.findUnique({where:{id:parseInt(e)},include:{productType:!0}})}async function x(e,t,a){await (0,p.jwtTokenVerification)();let d={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await r.db.productType.findUnique({where:{id:parseInt(d.productTypeId)}}))return(0,c.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let i=e.get("image"),s=a;if(i&&i.size>0){await y(a);let e=await i.arrayBuffer(),t=Buffer.from(e);o().existsSync(f)||o().mkdirSync(f);let d=Date.now()+n().extname(i.name);s=`uploads/${d}`;let r=n().join(process.cwd(),"public",s);await (0,l.writeFile)(r,t)}let b=parseInt(d.smallSize)+parseInt(d.mediumSize)+parseInt(d.largeSize);await r.db.product.update({where:{id:parseInt(t)},data:{name:d.name,description:d.description,sellPrice:parseFloat(d.sellPrice),mrp:parseFloat(d.mrp),image:s,currentStock:b,productTypeId:parseInt(d.productTypeId),isActive:"on"===d.isActive,smallSize:parseInt(d.smallSize),mediumSize:parseInt(d.mediumSize),largeSize:parseInt(d.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,c.redirect)("/products")}async function y(e){if(await (0,p.jwtTokenVerification)(),e){let t=n().join(process.cwd(),"public",e);o().existsSync(t)&&o().unlinkSync(t)}}async function j(e){await (0,p.jwtTokenVerification)(),await r.db.product.delete({where:{id:parseInt(e.id)}}),await y(e.image),(0,u.revalidatePath)("/products","page")}(0,b.h)([m,h,g,x,y,j]),(0,d.j)("c06bc94d4c97743c4399be7ea567dba4a5c95ad4",m),(0,d.j)("afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4",h),(0,d.j)("f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7",g),(0,d.j)("51237199063d7dde7ecdcece5fed42c803171fac",x),(0,d.j)("08bac90ba798c029913995b73a1774e0ed45bbdd",y),(0,d.j)("fb595c665cbf7db187ab127ddb4ee71d6d727110",j)},65883:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createProductType:()=>s,deleteProductType:()=>p,getProductTypes:()=>o,getUniqueProductType:()=>l,updateProductType:()=>u});var d=a(24330);a(60166);var r=a(16385),c=a(57708),i=a(58585),n=a(45907);async function s(e){await (0,n.jwtTokenVerification)();let t={name:e.get("name")};if(await r.db.productType.findUnique({where:{name:t.name}}))return(0,i.redirect)("/product-type/add?errorMessage=Product Type already exists.");await r.db.productType.create({data:{name:t.name}}),(0,c.revalidatePath)("/product-type","page"),(0,i.redirect)("/product-type")}async function o(){return await (0,n.jwtTokenVerification)(),await r.db.productType.findMany()}async function l(e){return await (0,n.jwtTokenVerification)(),await r.db.productType.findUnique({where:{id:parseInt(e)}})}async function u(e,t){await (0,n.jwtTokenVerification)();let a={name:e.get("name")};await r.db.productType.update({where:{id:parseInt(t)},data:{name:a.name}}),(0,c.revalidatePath)("/product-type","page"),(0,i.redirect)("/product-type")}async function p(e){await (0,n.jwtTokenVerification)(),await r.db.productType.delete({where:{id:e}}),(0,c.revalidatePath)("/product-type","page")}(0,a(40618).h)([s,o,l,u,p]),(0,d.j)("30fde77701062ab9858ba7a3094a98289ea1658a",s),(0,d.j)("168e6317ac10e81b65634b43b3b63d2b787932f3",o),(0,d.j)("93113786f48ef592bf71c4a596b5659aa2fe123b",l),(0,d.j)("9292c2ba51e9c42eece794e1d3cbda72604f9eee",u),(0,d.j)("a5c5a1ac997c4f42598f84e63fdaecb558bc452f",p)},72057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var d=a(19510),r=a(94598),c=a(65883);let i=(0,a(68570).createProxy)(String.raw`/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/screens/products/edit/index.jsx#default`),n=async({searchParams:e,params:t})=>{let a=await (0,c.getProductTypes)(),n=await (0,r.getUniqueProduct)(t.productId);return d.jsx("div",{children:d.jsx(i,{searchParams:e,productTypes:a,product:n})})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),d=t.X(0,[948,810,23,177,285,8,708,976],()=>a(58380));module.exports=d})();