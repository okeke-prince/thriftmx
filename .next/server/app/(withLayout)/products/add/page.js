(()=>{var e={};e.id=684,e.ids=[684],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},37284:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>c.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>b,tree:()=>o}),a(76059),a(67156),a(35866),a(68295);var r=a(23191),d=a(88716),i=a(37922),c=a.n(i),n=a(95231),s={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>n[e]);a.d(t,s);let o=["",{children:["(withLayout)",{children:["products",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,76059)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/products/add/page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,67156)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,68295)),"/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/app/(withLayout)/products/add/page.jsx"],u="/(withLayout)/products/add/page",p={require:a,loadChunk:()=>Promise.resolve()},b=new r.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/(withLayout)/products/add/page",pathname:"/products/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},85987:(e,t,a)=>{let r={"08bac90ba798c029913995b73a1774e0ed45bbdd":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.handleDeleteImage),"51237199063d7dde7ecdcece5fed42c803171fac":()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.updateProduct),afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.getProducts),c06bc94d4c97743c4399be7ea567dba4a5c95ad4:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.createProduct),f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.getUniqueProduct),fb595c665cbf7db187ab127ddb4ee71d6d727110:()=>Promise.resolve().then(a.bind(a,94598)).then(e=>e.deleteProduct),"4938cff2f84094ebf28b3110f00279e52ccc24c7":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.getUserData),"49bdfda0b61e1d9e3dec73e3358d0109a525a197":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.logoutUser),"6391ea613f5637ad589793c83dbae22bcc04f24a":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.loginUser),"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9":()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.deleteCookie),b37804ffc12cc9454dc2ec3bd116c0d6f76c5599:()=>Promise.resolve().then(a.bind(a,45907)).then(e=>e.jwtTokenVerification),"168e6317ac10e81b65634b43b3b63d2b787932f3":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.getProductTypes),"30fde77701062ab9858ba7a3094a98289ea1658a":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.createProductType),"9292c2ba51e9c42eece794e1d3cbda72604f9eee":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.updateProductType),"93113786f48ef592bf71c4a596b5659aa2fe123b":()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.getUniqueProductType),a5c5a1ac997c4f42598f84e63fdaecb558bc452f:()=>Promise.resolve().then(a.bind(a,65883)).then(e=>e.deleteProductType)};async function d(e,...t){return(await r[e]()).apply(null,t)}e.exports={"08bac90ba798c029913995b73a1774e0ed45bbdd":d.bind(null,"08bac90ba798c029913995b73a1774e0ed45bbdd"),"51237199063d7dde7ecdcece5fed42c803171fac":d.bind(null,"51237199063d7dde7ecdcece5fed42c803171fac"),afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4:d.bind(null,"afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4"),c06bc94d4c97743c4399be7ea567dba4a5c95ad4:d.bind(null,"c06bc94d4c97743c4399be7ea567dba4a5c95ad4"),f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7:d.bind(null,"f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7"),fb595c665cbf7db187ab127ddb4ee71d6d727110:d.bind(null,"fb595c665cbf7db187ab127ddb4ee71d6d727110"),"4938cff2f84094ebf28b3110f00279e52ccc24c7":d.bind(null,"4938cff2f84094ebf28b3110f00279e52ccc24c7"),"49bdfda0b61e1d9e3dec73e3358d0109a525a197":d.bind(null,"49bdfda0b61e1d9e3dec73e3358d0109a525a197"),"6391ea613f5637ad589793c83dbae22bcc04f24a":d.bind(null,"6391ea613f5637ad589793c83dbae22bcc04f24a"),"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9":d.bind(null,"7daf3bba8ebb2b53a49f365a1336efe6ccf888d9"),b37804ffc12cc9454dc2ec3bd116c0d6f76c5599:d.bind(null,"b37804ffc12cc9454dc2ec3bd116c0d6f76c5599"),"168e6317ac10e81b65634b43b3b63d2b787932f3":d.bind(null,"168e6317ac10e81b65634b43b3b63d2b787932f3"),"30fde77701062ab9858ba7a3094a98289ea1658a":d.bind(null,"30fde77701062ab9858ba7a3094a98289ea1658a"),"9292c2ba51e9c42eece794e1d3cbda72604f9eee":d.bind(null,"9292c2ba51e9c42eece794e1d3cbda72604f9eee"),"93113786f48ef592bf71c4a596b5659aa2fe123b":d.bind(null,"93113786f48ef592bf71c4a596b5659aa2fe123b"),a5c5a1ac997c4f42598f84e63fdaecb558bc452f:d.bind(null,"a5c5a1ac997c4f42598f84e63fdaecb558bc452f")}},72655:(e,t,a)=>{Promise.resolve().then(a.bind(a,3526))},3526:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(10326),d=a(17577),i=a(82065),c=a(75092);let n=({name:e,required:t,defaultValue:a})=>{let[n,s]=(0,d.useState)("No file chosen.");return(0,d.useEffect)(()=>{if(a){let e=a.split("/");s(e[e.length-1])}},[a]),(0,r.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-2 items-center",children:[r.jsx(c.I,{type:"file",name:e,required:t,className:"sr-only",id:"fileInput",onChange:e=>{s(e.target.files[0].name||"No file chosen.")}}),(0,r.jsxs)("label",{htmlFor:"fileInput",className:"custom-input px-4 py-2 bg-blue-500 text-white rounded-lg  cursor-pointer hover:bg-blue-600 w-fit flex items-center gap-x-2",children:[r.jsx(i.rG,{}),"Choose File"]}),r.jsx("span",{className:"ml-3 text-gray-600 truncate",children:n})]})}},75092:(e,t,a)=>{"use strict";a.d(t,{I:()=>i});var r=a(10326),d=a(91175);function i({type:e,className:t,...a}){return r.jsx("input",{type:e,className:(0,d.cn)("custom-input",t),...a})}},94598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createProduct:()=>m,deleteProduct:()=>j,getProducts:()=>h,getUniqueProduct:()=>g,handleDeleteImage:()=>y,updateProduct:()=>x});var r=a(24330);a(60166);var d=a(16385),i=a(58585),c=a(71017),n=a.n(c);let s=require("fs");var o=a.n(s);let l=require("fs/promises");var u=a(57708),p=a(45907),b=a(40618);let f=n().resolve("public/uploads");async function m(e){await (0,p.jwtTokenVerification)();let t={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await d.db.productType.findUnique({where:{id:parseInt(t.productTypeId)}}))return(0,i.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let a=e.get("image"),r="";if(a){let e=await a.arrayBuffer(),t=Buffer.from(e);o().existsSync(f)||o().mkdirSync(f);let d=Date.now()+n().extname(a.name);r=`uploads/${d}`;let i=n().join(process.cwd(),"public",r);await (0,l.writeFile)(i,t)}let c=parseInt(t.smallSize)+parseInt(t.mediumSize)+parseInt(t.largeSize);await d.db.product.create({data:{name:t.name,description:t.description,sellPrice:parseFloat(t.sellPrice),mrp:parseFloat(t.mrp),image:r,currentStock:c,productTypeId:parseInt(t.productTypeId),isActive:"on"===t.isActive,smallSize:parseInt(t.smallSize),mediumSize:parseInt(t.mediumSize),largeSize:parseInt(t.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,i.redirect)("/products")}async function h(){return await (0,p.jwtTokenVerification)(),await d.db.product.findMany({include:{productType:!0}})}async function g(e){return await (0,p.jwtTokenVerification)(),await d.db.product.findUnique({where:{id:parseInt(e)},include:{productType:!0}})}async function x(e,t,a){await (0,p.jwtTokenVerification)();let r={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await d.db.productType.findUnique({where:{id:parseInt(r.productTypeId)}}))return(0,i.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let c=e.get("image"),s=a;if(c&&c.size>0){await y(a);let e=await c.arrayBuffer(),t=Buffer.from(e);o().existsSync(f)||o().mkdirSync(f);let r=Date.now()+n().extname(c.name);s=`uploads/${r}`;let d=n().join(process.cwd(),"public",s);await (0,l.writeFile)(d,t)}let b=parseInt(r.smallSize)+parseInt(r.mediumSize)+parseInt(r.largeSize);await d.db.product.update({where:{id:parseInt(t)},data:{name:r.name,description:r.description,sellPrice:parseFloat(r.sellPrice),mrp:parseFloat(r.mrp),image:s,currentStock:b,productTypeId:parseInt(r.productTypeId),isActive:"on"===r.isActive,smallSize:parseInt(r.smallSize),mediumSize:parseInt(r.mediumSize),largeSize:parseInt(r.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,i.redirect)("/products")}async function y(e){if(await (0,p.jwtTokenVerification)(),e){let t=n().join(process.cwd(),"public",e);o().existsSync(t)&&o().unlinkSync(t)}}async function j(e){await (0,p.jwtTokenVerification)(),await d.db.product.delete({where:{id:parseInt(e.id)}}),await y(e.image),(0,u.revalidatePath)("/products","page")}(0,b.h)([m,h,g,x,y,j]),(0,r.j)("c06bc94d4c97743c4399be7ea567dba4a5c95ad4",m),(0,r.j)("afe7b32bf32dbe9d87cd380f48cb9fcfab3cadb4",h),(0,r.j)("f7dd1dd9653bf564de0b37f0ebc6cb8fd6de4ed7",g),(0,r.j)("51237199063d7dde7ecdcece5fed42c803171fac",x),(0,r.j)("08bac90ba798c029913995b73a1774e0ed45bbdd",y),(0,r.j)("fb595c665cbf7db187ab127ddb4ee71d6d727110",j)},65883:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createProductType:()=>s,deleteProductType:()=>p,getProductTypes:()=>o,getUniqueProductType:()=>l,updateProductType:()=>u});var r=a(24330);a(60166);var d=a(16385),i=a(57708),c=a(58585),n=a(45907);async function s(e){await (0,n.jwtTokenVerification)();let t={name:e.get("name")};if(await d.db.productType.findUnique({where:{name:t.name}}))return(0,c.redirect)("/product-type/add?errorMessage=Product Type already exists.");await d.db.productType.create({data:{name:t.name}}),(0,i.revalidatePath)("/product-type","page"),(0,c.redirect)("/product-type")}async function o(){return await (0,n.jwtTokenVerification)(),await d.db.productType.findMany()}async function l(e){return await (0,n.jwtTokenVerification)(),await d.db.productType.findUnique({where:{id:parseInt(e)}})}async function u(e,t){await (0,n.jwtTokenVerification)();let a={name:e.get("name")};await d.db.productType.update({where:{id:parseInt(t)},data:{name:a.name}}),(0,i.revalidatePath)("/product-type","page"),(0,c.redirect)("/product-type")}async function p(e){await (0,n.jwtTokenVerification)(),await d.db.productType.delete({where:{id:e}}),(0,i.revalidatePath)("/product-type","page")}(0,a(40618).h)([s,o,l,u,p]),(0,r.j)("30fde77701062ab9858ba7a3094a98289ea1658a",s),(0,r.j)("168e6317ac10e81b65634b43b3b63d2b787932f3",o),(0,r.j)("93113786f48ef592bf71c4a596b5659aa2fe123b",l),(0,r.j)("9292c2ba51e9c42eece794e1d3cbda72604f9eee",u),(0,r.j)("a5c5a1ac997c4f42598f84e63fdaecb558bc452f",p)},76059:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var r=a(19510),d=a(37696),i=a(23564),c=a(2959),n=a(47165);let s=({name:e,className:t,defaultValue:a})=>(0,r.jsxs)("label",{className:(0,n.cn)("inline-flex items-center cursor-pointer w-fit",t),children:[r.jsx(i.I,{type:"checkbox",name:e,className:"sr-only peer",defaultChecked:a}),r.jsx("div",{className:"relative w-16 h-8 bg-gray-200 rounded-full after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:rounded-full after:h-7 after:w-7 after:transition-all peer peer-checked:after:translate-x-full  rtl:peer-checked:after:-translate-x-full peer-checked:bg-blue-600"})]}),o=(0,a(68570).createProxy)(String.raw`/Users/test/Downloads/nextjs-13.13-ChartSectionComponent/src/components/ui/CustomFileInput.jsx#default`);var l=a(94598);let u=({searchParams:e,productTypes:t})=>{let{errorMessage:a}=e;return(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold p-2",children:" Add Product "}),(0,r.jsxs)("form",{className:"grid gap-x-6 gap-y-10 mt-10 grid-cols-2 px-2",action:l.createProduct,children:[a&&r.jsx("div",{className:"col-span-2 border border-red-500 rounded-xl px-5 py-3 bg-red-50 w-fit",children:r.jsx("span",{className:"text-red-500 col-span-2 text-mg my-0 font-500",children:a})}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Product Name"}),r.jsx(i.I,{placeholder:"Enter Product Name",name:"name"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Product Type"}),r.jsx("select",{className:"custom-input appearance-none cursor-pointer",name:"productType",children:t?.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"MRP"}),r.jsx(i.I,{placeholder:"Enter MRP",name:"mrp"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Selling Price"}),r.jsx(i.I,{type:"number",placeholder:"Enter Selling Price",name:"sellPrice"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Image"}),r.jsx(o,{name:"image",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Stock of Small Size"}),r.jsx(i.I,{type:"number",placeholder:"Enter Stock of Small Size",name:"smallSize"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Stock of Medium Size"}),r.jsx(i.I,{type:"number",placeholder:"Enter Stock of Medium Size",name:"mediumSize"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Stock of Large Size"}),r.jsx(i.I,{type:"number",placeholder:"Enter Stock of Large Size",name:"largeSize"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Product Status"}),r.jsx(s,{name:"isActive"})]}),(0,r.jsxs)("div",{className:"grid col-span-2 gap-2",children:[r.jsx(c.Z,{required:!0,children:"Description"}),r.jsx("textarea",{className:"custom-input h-auto",name:"description",rows:5,placeholder:"Enter Product Description"})]}),r.jsx(d.z,{className:"w-52 col-span-2 mt-2",children:"Submit"})]})]})};var p=a(65883);let b=async({searchParams:e})=>{let t=await (0,p.getProductTypes)();return r.jsx(r.Fragment,{children:r.jsx(u,{searchParams:e,productTypes:t})})}},37696:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var r=a(19510),d=a(47165);function i({className:e,onClick:t,children:a,...i}){return r.jsx("div",{children:r.jsx("button",{className:(0,d.cn)("custom-submit-btn",e),onClick:t,children:a})})}},23564:(e,t,a)=>{"use strict";a.d(t,{I:()=>i});var r=a(19510),d=a(47165);function i({type:e,className:t,...a}){return r.jsx("input",{type:e,className:(0,d.cn)("custom-input",t),...a})}},2959:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(19510),d=a(47165);function i({className:e,required:t,children:a}){return(0,r.jsxs)("div",{className:(0,d.cn)("text-sm lg:text-base h-fit",e),children:[r.jsx("label",{children:a}),t&&r.jsx("span",{className:"text-red-500",children:"*"})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,810,23,177,285,8,708,976],()=>a(37284));module.exports=r})();