(()=>{var e={};e.id=684,e.ids=[684],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},70149:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>c.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>f,tree:()=>o}),t(76059),t(67156),t(35866),t(68295);var r=t(23191),d=t(88716),i=t(37922),c=t.n(i),n=t(95231),s={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>n[e]);t.d(a,s);let o=["",{children:["(withLayout)",{children:["products",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,76059)),"/Users/test/Downloads/ThriftMax/src/app/(withLayout)/products/add/page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,67156)),"/Users/test/Downloads/ThriftMax/src/app/(withLayout)/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,68295)),"/Users/test/Downloads/ThriftMax/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/test/Downloads/ThriftMax/src/app/(withLayout)/products/add/page.jsx"],u="/(withLayout)/products/add/page",p={require:t,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/(withLayout)/products/add/page",pathname:"/products/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5241:(e,a,t)=>{let r={"07bcfee8f6b22c949bcdd0735f3f98717dad9843":()=>Promise.resolve().then(t.bind(t,94598)).then(e=>e.deleteProduct),"2b4ee8cd97549b75b3c1062efb40e826b6f04772":()=>Promise.resolve().then(t.bind(t,94598)).then(e=>e.handleDeleteImage),"7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b":()=>Promise.resolve().then(t.bind(t,94598)).then(e=>e.getProducts),"99ad7be6a2e4ccc80518dac1ffad49ea8ddced50":()=>Promise.resolve().then(t.bind(t,94598)).then(e=>e.createProduct),a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4:()=>Promise.resolve().then(t.bind(t,94598)).then(e=>e.getUniqueProduct),f55a8fe18170919c294173ba15a0a28085d0622b:()=>Promise.resolve().then(t.bind(t,94598)).then(e=>e.updateProduct),"4b8a8793f6cac0a684ebfbdb87642c6103bcb493":()=>Promise.resolve().then(t.bind(t,45907)).then(e=>e.deleteCookie),"50945b97a8168d74b4af0a7dca5d20277190247c":()=>Promise.resolve().then(t.bind(t,45907)).then(e=>e.logoutUser),a3af60c0481ba134354d340725ac936e2df2d176:()=>Promise.resolve().then(t.bind(t,45907)).then(e=>e.loginUser),b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af:()=>Promise.resolve().then(t.bind(t,45907)).then(e=>e.jwtTokenVerification),c741e8319e6ee182d899d82bd0eff88c7c3aa98f:()=>Promise.resolve().then(t.bind(t,45907)).then(e=>e.getUserData),"1f0528b4be2c6babaa279b9d59a5ace5f08614b0":()=>Promise.resolve().then(t.bind(t,65883)).then(e=>e.deleteProductType),"661ec2e097d11d19f1f9c69679e0058cfb1db590":()=>Promise.resolve().then(t.bind(t,65883)).then(e=>e.getUniqueProductType),"78b51568e4d77b6e631bd7a4934927daa6485ae5":()=>Promise.resolve().then(t.bind(t,65883)).then(e=>e.createProductType),"8ed556500ce464bd94d25b5b4d6437b88f4f1e22":()=>Promise.resolve().then(t.bind(t,65883)).then(e=>e.updateProductType),f84406b5aaa766b7fed34d55073ea9c6d5372779:()=>Promise.resolve().then(t.bind(t,65883)).then(e=>e.getProductTypes)};async function d(e,...a){return(await r[e]()).apply(null,a)}e.exports={"07bcfee8f6b22c949bcdd0735f3f98717dad9843":d.bind(null,"07bcfee8f6b22c949bcdd0735f3f98717dad9843"),"2b4ee8cd97549b75b3c1062efb40e826b6f04772":d.bind(null,"2b4ee8cd97549b75b3c1062efb40e826b6f04772"),"7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b":d.bind(null,"7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b"),"99ad7be6a2e4ccc80518dac1ffad49ea8ddced50":d.bind(null,"99ad7be6a2e4ccc80518dac1ffad49ea8ddced50"),a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4:d.bind(null,"a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4"),f55a8fe18170919c294173ba15a0a28085d0622b:d.bind(null,"f55a8fe18170919c294173ba15a0a28085d0622b"),"4b8a8793f6cac0a684ebfbdb87642c6103bcb493":d.bind(null,"4b8a8793f6cac0a684ebfbdb87642c6103bcb493"),"50945b97a8168d74b4af0a7dca5d20277190247c":d.bind(null,"50945b97a8168d74b4af0a7dca5d20277190247c"),a3af60c0481ba134354d340725ac936e2df2d176:d.bind(null,"a3af60c0481ba134354d340725ac936e2df2d176"),b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af:d.bind(null,"b5eefc12adfbd69e5ae6619aad9ca1f7b5dae5af"),c741e8319e6ee182d899d82bd0eff88c7c3aa98f:d.bind(null,"c741e8319e6ee182d899d82bd0eff88c7c3aa98f"),"1f0528b4be2c6babaa279b9d59a5ace5f08614b0":d.bind(null,"1f0528b4be2c6babaa279b9d59a5ace5f08614b0"),"661ec2e097d11d19f1f9c69679e0058cfb1db590":d.bind(null,"661ec2e097d11d19f1f9c69679e0058cfb1db590"),"78b51568e4d77b6e631bd7a4934927daa6485ae5":d.bind(null,"78b51568e4d77b6e631bd7a4934927daa6485ae5"),"8ed556500ce464bd94d25b5b4d6437b88f4f1e22":d.bind(null,"8ed556500ce464bd94d25b5b4d6437b88f4f1e22"),f84406b5aaa766b7fed34d55073ea9c6d5372779:d.bind(null,"f84406b5aaa766b7fed34d55073ea9c6d5372779")}},94722:(e,a,t)=>{Promise.resolve().then(t.bind(t,3526))},3526:(e,a,t)=>{"use strict";t.d(a,{default:()=>n});var r=t(10326),d=t(17577),i=t(82065),c=t(75092);let n=({name:e,required:a,defaultValue:t})=>{let[n,s]=(0,d.useState)("No file chosen.");return(0,d.useEffect)(()=>{if(t){let e=t.split("/");s(e[e.length-1])}},[t]),(0,r.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-2 items-center",children:[r.jsx(c.I,{type:"file",name:e,required:a,className:"sr-only",id:"fileInput",onChange:e=>{s(e.target.files[0].name||"No file chosen.")}}),(0,r.jsxs)("label",{htmlFor:"fileInput",className:"custom-input px-4 py-2 bg-blue-500 text-white rounded-lg  cursor-pointer hover:bg-blue-600 w-fit flex items-center gap-x-2",children:[r.jsx(i.rG,{}),"Choose File"]}),r.jsx("span",{className:"ml-3 text-gray-600 truncate",children:n})]})}},75092:(e,a,t)=>{"use strict";t.d(a,{I:()=>i});var r=t(10326),d=t(91175);function i({type:e,className:a,...t}){return r.jsx("input",{type:e,className:(0,d.cn)("custom-input",a),...t})}},94598:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createProduct:()=>m,deleteProduct:()=>j,getProducts:()=>h,getUniqueProduct:()=>g,handleDeleteImage:()=>y,updateProduct:()=>x});var r=t(24330);t(60166);var d=t(16385),i=t(58585),c=t(71017),n=t.n(c);let s=require("fs");var o=t.n(s);let l=require("fs/promises");var u=t(57708),p=t(45907),f=t(40618);let b=n().resolve("public/uploads");async function m(e){await (0,p.jwtTokenVerification)();let a={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await d.db.productType.findUnique({where:{id:parseInt(a.productTypeId)}}))return(0,i.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let t=e.get("image"),r="";if(t){let e=await t.arrayBuffer(),a=Buffer.from(e);o().existsSync(b)||o().mkdirSync(b);let d=Date.now()+n().extname(t.name);r=`uploads/${d}`;let i=n().join(process.cwd(),"public",r);await (0,l.writeFile)(i,a)}let c=parseInt(a.smallSize)+parseInt(a.mediumSize)+parseInt(a.largeSize);await d.db.product.create({data:{name:a.name,description:a.description,sellPrice:parseFloat(a.sellPrice),mrp:parseFloat(a.mrp),image:r,currentStock:c,productTypeId:parseInt(a.productTypeId),isActive:"on"===a.isActive,smallSize:parseInt(a.smallSize),mediumSize:parseInt(a.mediumSize),largeSize:parseInt(a.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,i.redirect)("/products")}async function h(){return await (0,p.jwtTokenVerification)(),await d.db.product.findMany({include:{productType:!0}})}async function g(e){return await (0,p.jwtTokenVerification)(),await d.db.product.findUnique({where:{id:parseInt(e)},include:{productType:!0}})}async function x(e,a,t){await (0,p.jwtTokenVerification)();let r={name:e.get("name"),description:e.get("description"),sellPrice:e.get("sellPrice"),mrp:e.get("mrp"),smallSize:e.get("smallSize"),mediumSize:e.get("mediumSize"),largeSize:e.get("largeSize"),productTypeId:e.get("productType"),isActive:e.get("isActive")};if(!await d.db.productType.findUnique({where:{id:parseInt(r.productTypeId)}}))return(0,i.redirect)("/product/add?errorMessage=Product Type not found. Please try with different product type.");let c=e.get("image"),s=t;if(c&&c.size>0){await y(t);let e=await c.arrayBuffer(),a=Buffer.from(e);o().existsSync(b)||o().mkdirSync(b);let r=Date.now()+n().extname(c.name);s=`uploads/${r}`;let d=n().join(process.cwd(),"public",s);await (0,l.writeFile)(d,a)}let f=parseInt(r.smallSize)+parseInt(r.mediumSize)+parseInt(r.largeSize);await d.db.product.update({where:{id:parseInt(a)},data:{name:r.name,description:r.description,sellPrice:parseFloat(r.sellPrice),mrp:parseFloat(r.mrp),image:s,currentStock:f,productTypeId:parseInt(r.productTypeId),isActive:"on"===r.isActive,smallSize:parseInt(r.smallSize),mediumSize:parseInt(r.mediumSize),largeSize:parseInt(r.largeSize)}}),(0,u.revalidatePath)("/products","page"),(0,i.redirect)("/products")}async function y(e){if(await (0,p.jwtTokenVerification)(),e){let a=n().join(process.cwd(),"public",e);o().existsSync(a)&&o().unlinkSync(a)}}async function j(e){await (0,p.jwtTokenVerification)(),await d.db.product.delete({where:{id:parseInt(e.id)}}),await y(e.image),(0,u.revalidatePath)("/products","page")}(0,f.h)([m,h,g,x,y,j]),(0,r.j)("99ad7be6a2e4ccc80518dac1ffad49ea8ddced50",m),(0,r.j)("7104a7e471fb8e9c8fcf83dc0045ee53d8890c4b",h),(0,r.j)("a2bfda94c9632f50b29a52e7d67e5e5cfd5555e4",g),(0,r.j)("f55a8fe18170919c294173ba15a0a28085d0622b",x),(0,r.j)("2b4ee8cd97549b75b3c1062efb40e826b6f04772",y),(0,r.j)("07bcfee8f6b22c949bcdd0735f3f98717dad9843",j)},65883:(e,a,t)=>{"use strict";t.r(a),t.d(a,{createProductType:()=>s,deleteProductType:()=>p,getProductTypes:()=>o,getUniqueProductType:()=>l,updateProductType:()=>u});var r=t(24330);t(60166);var d=t(16385),i=t(57708),c=t(58585),n=t(45907);async function s(e){await (0,n.jwtTokenVerification)();let a={name:e.get("name")};if(await d.db.productType.findUnique({where:{name:a.name}}))return(0,c.redirect)("/product-type/add?errorMessage=Product Type already exists.");await d.db.productType.create({data:{name:a.name}}),(0,i.revalidatePath)("/product-type","page"),(0,c.redirect)("/product-type")}async function o(){return await (0,n.jwtTokenVerification)(),await d.db.productType.findMany()}async function l(e){return await (0,n.jwtTokenVerification)(),await d.db.productType.findUnique({where:{id:parseInt(e)}})}async function u(e,a){await (0,n.jwtTokenVerification)();let t={name:e.get("name")};await d.db.productType.update({where:{id:parseInt(a)},data:{name:t.name}}),(0,i.revalidatePath)("/product-type","page"),(0,c.redirect)("/product-type")}async function p(e){await (0,n.jwtTokenVerification)(),await d.db.productType.delete({where:{id:e}}),(0,i.revalidatePath)("/product-type","page")}(0,t(40618).h)([s,o,l,u,p]),(0,r.j)("78b51568e4d77b6e631bd7a4934927daa6485ae5",s),(0,r.j)("f84406b5aaa766b7fed34d55073ea9c6d5372779",o),(0,r.j)("661ec2e097d11d19f1f9c69679e0058cfb1db590",l),(0,r.j)("8ed556500ce464bd94d25b5b4d6437b88f4f1e22",u),(0,r.j)("1f0528b4be2c6babaa279b9d59a5ace5f08614b0",p)},76059:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var r=t(19510),d=t(37696),i=t(23564),c=t(2959),n=t(47165);let s=({name:e,className:a,defaultValue:t})=>(0,r.jsxs)("label",{className:(0,n.cn)("inline-flex items-center cursor-pointer w-fit",a),children:[r.jsx(i.I,{type:"checkbox",name:e,className:"sr-only peer",defaultChecked:t}),r.jsx("div",{className:"relative w-16 h-8 bg-gray-200 rounded-full after:content-[''] after:absolute after:top-0.5 after:start-[4px] after:bg-white after:rounded-full after:h-7 after:w-7 after:transition-all peer peer-checked:after:translate-x-full  rtl:peer-checked:after:-translate-x-full peer-checked:bg-blue-600"})]}),o=(0,t(68570).createProxy)(String.raw`/Users/test/Downloads/ThriftMax/src/components/ui/CustomFileInput.jsx#default`);var l=t(94598);let u=({searchParams:e,productTypes:a})=>{let{errorMessage:t}=e;return(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-semibold p-2",children:" Add Product "}),(0,r.jsxs)("form",{className:"grid gap-x-6 gap-y-10 mt-10 grid-cols-2 px-2",action:l.createProduct,children:[t&&r.jsx("div",{className:"col-span-2 border border-red-500 rounded-xl px-5 py-3 bg-red-50 w-fit",children:r.jsx("span",{className:"text-red-500 col-span-2 text-mg my-0 font-500",children:t})}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Product Name"}),r.jsx(i.I,{placeholder:"Enter Product Name",name:"name"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Product Type"}),r.jsx("select",{className:"custom-input appearance-none cursor-pointer",name:"productType",children:a?.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"MRP"}),r.jsx(i.I,{placeholder:"Enter MRP",name:"mrp"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Selling Price"}),r.jsx(i.I,{type:"number",placeholder:"Enter Selling Price",name:"sellPrice"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Image"}),r.jsx(o,{name:"image",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Stock of Small Size"}),r.jsx(i.I,{type:"number",placeholder:"Enter Stock of Small Size",name:"smallSize"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Stock of Medium Size"}),r.jsx(i.I,{type:"number",placeholder:"Enter Stock of Medium Size",name:"mediumSize"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Stock of Large Size"}),r.jsx(i.I,{type:"number",placeholder:"Enter Stock of Large Size",name:"largeSize"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c.Z,{required:!0,children:"Product Status"}),r.jsx(s,{name:"isActive"})]}),(0,r.jsxs)("div",{className:"grid col-span-2 gap-2",children:[r.jsx(c.Z,{required:!0,children:"Description"}),r.jsx("textarea",{className:"custom-input h-auto",name:"description",rows:5,placeholder:"Enter Product Description"})]}),r.jsx(d.z,{className:"w-52 col-span-2 mt-2",children:"Submit"})]})]})};var p=t(65883);let f=async({searchParams:e})=>{let a=await (0,p.getProductTypes)();return r.jsx(r.Fragment,{children:r.jsx(u,{searchParams:e,productTypes:a})})}},37696:(e,a,t)=>{"use strict";t.d(a,{z:()=>i});var r=t(19510),d=t(47165);function i({className:e,onClick:a,children:t,...i}){return r.jsx("div",{children:r.jsx("button",{className:(0,d.cn)("custom-submit-btn",e),onClick:a,children:t})})}},23564:(e,a,t)=>{"use strict";t.d(a,{I:()=>i});var r=t(19510),d=t(47165);function i({type:e,className:a,...t}){return r.jsx("input",{type:e,className:(0,d.cn)("custom-input",a),...t})}},2959:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var r=t(19510),d=t(47165);function i({className:e,required:a,children:t}){return(0,r.jsxs)("div",{className:(0,d.cn)("text-sm lg:text-base h-fit",e),children:[r.jsx("label",{children:t}),a&&r.jsx("span",{className:"text-red-500",children:"*"})]})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[948,810,23,177,285,8,708,747],()=>t(70149));module.exports=r})();